# Log warnings and errors to stderr
log level warn;

# Log everything to syslog
log to syslog level info;

# Set the interface name
interface "mesh-vpn";

# Support salsa2012+umac and null methods, prefer salsa2012+umac
method "salsa2012+umac";
method "null";

mode tap;

# Bind to a fixed port, IPv4 only
bind 0.0.0.0:53757;

# Secret key generated by `fastd --generate-key`
secret "5837e46831795f028be69982945aaa75480bd91d609a635cbc0ebaec1422be42";
#2018-04-15 21:55:41 +0200 --- Info: Reading 32 bytes from /dev/random...
#Secret: 5837e46831795f028be69982945aaa75480bd91d609a635cbc0ebaec1422be42
#Public: 20d23d3cff7c2bd594e1b4d8fd8d578dc3c067bf273b9419695e0a297aaa1aa2

secure handshakes yes;

# Set the interface MTU for TAP mode with xsalsa20/aes128 over IPv4 with a base MTU of 1492 (PPPoE)
# (see MTU selection documentation)
mtu 1364;

peer limit 1;

# Include peers from the directory 'peers'
include peers from "/etc/fastd/ffrhb/peers";

on up "
  /etc/fastd/ffrhb/on-up.sh $INTERFACE
";

on down "
  /etc/fastd/ffrhb/on-down.sh $INTERFACE 
";
